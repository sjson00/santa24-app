const receptionForm = document.getElementById("receptionForm");

// 접수 상태 초기화
function checkReceptionStatus() {
    if (!receptionEnabled) {
        receptionForm.style.pointerEvents = "none";
        receptionForm.style.opacity = "0.5";
        receptionStatus.style.display = "block";
        toggleReception.innerText = "접수 시작";
    } else {
        receptionForm.style.pointerEvents = "auto";
        receptionForm.style.opacity = "1";
        receptionStatus.style.display = "none";
        toggleReception.innerText = "접수 마감";
    }
}

// 페이지 로드 시 접수 상태 확인
window.onload = checkReceptionStatus;

toggleReception.onclick = () => {
    receptionEnabled = !receptionEnabled;
    checkReceptionStatus();  // 상태 확인 함수 호출
};

receptionForm.onsubmit = e => {
    e.preventDefault();
    if (!receptionEnabled) {
        return alert("현재 접수가 중단되었습니다.");
    }
    push(patientsRef, {
        name: receptionForm.name.value,
        birthdate: receptionForm.birthdate.value,
        gender: receptionForm.gender.value,
        symptoms: receptionForm.symptoms.value,
        timestamp: new Date().toISOString()
    });
    alert("접수 완료");
    receptionForm.reset();
};
